/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
const start25=5,start50=10,start75=15,start100=20,getTransition=()=>d3.transition().duration(200),illustrations=["community","school","distance","waterMCL","solution","coloring"],triggerAnimations=(t,o)=>{const e=illustrationsInfo.find(o=>o.community===t),i=(t,o)=>{gsap.to(`.village-${t} .section-${o} .coloring`,{opacity:1,duration:2,ease:"sine.out"})},n=(t,o,e)=>{const i="left"===e?"-":"+";gsap.timeline().to(t,{morphSVG:o,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},0).to(t,{morphSVG:t,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(t,{morphSVG:o,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(t,{morphSVG:t,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(t,{morphSVG:o,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(t,{morphSVG:t,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(t,{morphSVG:o,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(t,{morphSVG:t,x:`${i}=10`,y:y="-=15",duration:.4,ease:"none"},">")},a=(o,e,i,n,a)=>{gsap.set(`#${t}-${o}-wheel-back, #${t}-${o}-wheel-front`,{transformOrigin:"50% 50%"},0);const s="back.in(1.7)",c="+"===i?"-":"+";gsap.timeline().to(`#${t}-${o}-wheel-back`,{rotation:`${i}=${n}`,duration:2,ease:s},3.1).to(`#${t}-${o}-wheel-front`,{rotation:`${i}=${a}`,duration:2,ease:s},3.1).to(`#${t}-${o}-tractor`,{x:`${i}${e}`,duration:2,ease:s},3.1).to(`#${t}-${o}-wheel-back`,{rotation:`${c}=${n}`,duration:1,ease:"back.out(1.4)"},7).to(`#${t}-${o}-wheel-front`,{rotation:`${c}=${a}`,duration:1,ease:"back.out(1.4)"},7).to(`#${t}-${o}-tractor`,{x:0,duration:1,ease:"back.out(1.4)"},7)},s=t=>{t.forEach(t=>{gsap.to(t.selector,{drawSVG:"100%",duration:2})})};if(o>=25){const c={trigger:`.village-${t} .section-community svg`,start:"top center",end:"bottom 0",onEnterBack:()=>u.restart(),onLeave:()=>u.pause()},u=gsap.timeline({scrollTrigger:c});o>=75&&e.animalsCommunity.forEach(o=>{o.selector=document.querySelectorAll(`#${t}-community-${o.id} path, #${t}-community-${o.id} line, #${t}-community-${o.id} polyline`),gsap.set(o.selector,{drawSVG:0})});const m=`${e.cloudsCommunity.direction}=${e.cloudsCommunity.distance}`;"totoral-bajo"===t?gsap.set(`#${t}-community-clouds-back-outline`,{x:m,opacity:0}):"las-mercedes"===t?gsap.set(`#${t}-community-clouds-front-outline, #${t}-community-clouds-back-outline`,{x:m,opacity:0}):"carrizalillo"===t?gsap.set(`#${t}-community-clouds-outline`,{x:m,opacity:0}):"la-merced"===t&&gsap.set(`#${t}-community-sun`,{opacity:0,y:20}),"la-merced"!==t&&(gsap.set(`#${t}-community-clouds-front`,{opacity:0}),gsap.set(`#${t}-community-clouds-front`,{x:m}));const l=()=>{const o=gsap.timeline();"totoral-bajo"===t?o.to(`#${t}-community-clouds-front`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${t}-community-clouds-front`,{x:-1*m,duration:20,ease:"sine.out"},"<-1").to(`#${t}-community-clouds-back-outline`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${t}-community-clouds-back-outline`,{x:-1*m,duration:20,ease:"sine.out"},"<-1"):"las-mercedes"===t?o.to(`#${t}-community-clouds-front, #${t}-community-clouds-front-outline`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${t}-community-clouds-front, #${t}-community-clouds-front-outline`,{x:-1*m,duration:20,ease:"sine.out"},"<-1").to(`#${t}-community-clouds-back-outline`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${t}-community-clouds-back-outline`,{x:-1*m,duration:20,ease:"sine.out"},"<-1"):"carrizalillo"===t?o.to(`#${t}-community-clouds-front, #${t}-community-clouds-outline`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${t}-community-clouds-front, #${t}-community-clouds-outline`,{x:-1*m,duration:20,ease:"sine.out"},"<-1"):"la-merced"===t?o.to(`#${t}-community-sun`,{opacity:1,duration:1,ease:"sine.out"},0).to(`#${t}-community-sun`,{y:0,duration:8,ease:"sine.out"},"<-1"):o.to(`#${t}-community-clouds-front`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${t}-community-clouds-front`,{x:-1*m,duration:20,ease:"sine.out"},"<-1")},r=()=>{gsap.timeline().call(a,["community",e.vehicleCommunity.distance,e.vehicleCommunity.direction,e.vehicleCommunity.rotationWheelBack,e.vehicleCommunity.rotationWheelFront])},d=()=>{gsap.timeline().call(s,[e.animalsCommunity])},y=()=>{const o=gsap.timeline();"totoral-alto"===t?o.call(n,[`#${t}-community-bird1-state1`,`#${t}-community-bird1-state2`,"right"]).call(n,[`#${t}-community-bird3-state1`,`#${t}-community-bird3-state2`,"left"],">+1").call(n,[`#${t}-community-bird2-state1`,`#${t}-community-bird2-state2`,"left"],">+1").to(villageColorsSelector,{opacity:1,duration:3,ease:"sine.out",stagger:{each:.2,from:"random"}},">-1"):"totoral-bajo"==t?o.call(n,[`#${t}-community-bird1-state1`,`#${t}-community-bird1-state2`,"left"]).call(n,[`#${t}-community-bird3-state1`,`#${t}-community-bird3-state2`,"left"],">+1").call(n,[`#${t}-community-bird2-state1`,`#${t}-community-bird2-state2`,"left"],">+1").to(villageColorsSelector,{opacity:1,duration:3,ease:"sine.out",stagger:{each:.2,from:"random"}},">-1"):o.call(n,[`#${t}-community-bird2-state1`,`#${t}-community-bird2-state2`,"left"]).call(n,[`#${t}-community-bird1-state1`,`#${t}-community-bird1-state2`,"left"],1)},$=[{level:25,timing:4},{level:50,timing:12},{level:75,timing:12},{level:100,timing:14}];u.call(l,null,1).call(i,[t,"community"],$.find(t=>t.level===o).timing),o>=50&&u.add(r,4),o>=75&&u.add(d,8),100===o&&u.add(y,12)}};