/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
const start25=5,start50=10,start75=15,start100=20,getTransition=()=>d3.transition().duration(200),illustrations=["community","school","distance","waterMCL","solution","coloring"],triggerAnimations=o=>{const t=illustrationsInfo.find(t=>t.community===o);null===document.querySelector(`.village-${o} .section-community .counter`)&&illustrations.forEach(t=>{d3.select(`.village-${o} .section-${t}`).append("div").attr("class","counter").text("0%")});const e=(t,e)=>{d3.select(`.village-${o} .section-${t} .counter`).transition(getTransition()).style("opacity",0).transition(getTransition()).text(`${e}%`).transition(getTransition()).style("opacity",1)},a=(o,t,e)=>{const a="left"===e?"-":"+";gsap.timeline().to(o,{morphSVG:t,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},0).to(o,{morphSVG:o,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:t,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:o,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:t,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:o,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">")},l=(e,l,n)=>{const i=t[e],r=t[n],s=gsap.timeline();switch(i){case 2:s.call(a,[`#${o}-${l}-bird1-state1`,`#${o}-${l}-bird1-state2`,r]).call(a,[`#${o}-${l}-bird2-state1`,`#${o}-${l}-bird2-state2`,r],">+1");break;case 4:s.call(a,[`#${o}-${l}-bird1-state1`,`#${o}-${l}-bird1-state2`,r]).call(a,[`#${o}-${l}-bird2-state1`,`#${o}-${l}-bird2-state2`,r],">+1").call(a,[`#${o}-${l}-bird3-state1`,`#${o}-${l}-bird3-state2`,r],">+1").call(a,[`#${o}-${l}-bird4-state1`,`#${o}-${l}-bird4-state2`,r],">+1")}},n=t=>{const e=gsap.timeline();e.set(`#${o}-${t}-river-tides`,{x:"-=20",opacity:0}).to(`#${o}-${t}-river-tides`,{x:"+=30",opacity:1,duration:4,ease:"none"}).to(`#${o}-${t}-river-tides`,{x:"+=30",opacity:0,duration:4,ease:"none"}),e.repeat(-1).repeatDelay(2)},i=o=>{o.forEach(o=>{gsap.to(o.selector,{drawSVG:"100%",duration:2})})},r={trigger:`.village-${o} .section-community svg`,start:"top center",end:"bottom 0",onEnterBack:()=>s.restart(),onLeave:()=>s.pause()},s=gsap.timeline({scrollTrigger:r});t.animalsCommunity.forEach(t=>{t.selector=document.querySelectorAll(`#${o}-community-${t.id} path, #${o}-community-${t.id} line, #${o}-community-${t.id} polyline`),gsap.set(t.selector,{drawSVG:0})});s.call(e,["community",25],5).call(()=>{gsap.to(`#cloud-color-1, #${o}-community-clouds-back`,{opacity:.42,duration:1,ease:"power1.out"}),gsap.to(`#${o}-community-sun-color`,{opacity:.8,duration:1,ease:"power1.out"}),gsap.timeline().fromTo(`#${o}-community-clouds-front`,{x:220},{x:-300,duration:50,repeat:-1,ease:"none"},0).fromTo(`#${o}-community-clouds-back`,{x:220},{x:-300,duration:80,repeat:-1,ease:"none"},0)},null,5).call(e,["community",50],10).call((t,e,a,l,n)=>{gsap.set(`#${o}-${t}-wheel-back, #${o}-${t}-wheel-front`,{transformOrigin:"50% 50%"},0);const i="back.in(1.7)",r="+"===a?"-":"+",s=gsap.timeline();s.to(`#${o}-${t}-wheel-back`,{rotation:`${a}=${l}`,duration:2,ease:i},0).to(`#${o}-${t}-wheel-front`,{rotation:`${a}=${n}`,duration:2,ease:i},0).to(`#${o}-${t}-tractor`,{x:`${a}${e}`,duration:2,ease:i},0).to(`#${o}-${t}-wheel-back`,{rotation:`${r}=${l}`,duration:1,ease:"back.out(1.4)"},7).to(`#${o}-${t}-wheel-front`,{rotation:`${r}=${n}`,duration:1,ease:"back.out(1.4)"},17).to(`#${o}-${t}-tractor`,{x:0,duration:1,ease:"back.out(1.4)"},7),s.repeat(-1).repeatDelay(10).yoyo(!0)},["community",t.vehicleCommunity.distance,t.vehicleCommunity.direction,t.vehicleCommunity.rotationWheelBack,t.vehicleCommunity.rotationWheelFront],10).call(e,["community",75],15).call(i,[t.animalsCommunity],15).call(e,["community",100],20).call(a,[`#${o}-community-bird2-state1`,`#${o}-community-bird2-state2`,"left"],20).call(a,[`#${o}-community-bird1-state1`,`#${o}-community-bird1-state2`,"left"],21);const c={trigger:`.village-${o} .section-school svg`,start:"top center",end:"bottom 0",onEnterBack:()=>d.restart(),onLeave:()=>d.pause()},d=gsap.timeline({scrollTrigger:c}),u=document.querySelectorAll(`#${o}-school-kids polygon, #${o}-school-kids polyline, #${o}-school-kids path, #${o}-school-kids ellipse`),$=document.querySelectorAll(`#${o}-school-kid1-mouth, #${o}-school-kid2-mouth`);gsap.set(`#${o}-school-clock-small-hand`,{transformOrigin:"bottom center"},0),gsap.set(`#${o}-school-clock-big-hand`,{transformOrigin:"bottom center"},0),gsap.set(`#${o}-school-clock-mouth`,{opacity:0}),gsap.set($,{opacity:0}),t.hasTwoSchools?gsap.set(`#${o}-school-flag-top-state2, #${o}-school-flag-top-state3, #${o}-school-flag-bottom-state2, #${o}-school-flag-bottom-state3`,{opacity:0},0):gsap.set(`#${o}-school-flag-state2, #${o}-school-flag-state3`,{opacity:0},0);d.to(`#${o}-school-clock-small-hand`,{rotation:360*t.missedSchoolHours.max/12,duration:3,ease:"none"},2).to(`#${o}-school-clock-big-hand`,{rotation:360*t.missedSchoolHours.max,duration:3,ease:"none"},2).call(()=>{const t=document.querySelector(`#${o}-school-clock-tear-left`),e=document.querySelector(`#${o}-school-clock-tear-right`);schoolTearsTl=gsap.timeline(),schoolTearsTl.from(t,{drawSVG:0,duration:.7,ease:"none"},0).to(t,{y:25,duration:1,ease:"power2.in"}).to(t,{drawSVG:"100% 100%",opacity:0,duration:.1}).from(e,{drawSVG:0,duration:.7,ease:"none"},3.2).to(e,{y:25,duration:1,ease:"power2.in"}).to(e,{drawSVG:"100% 100%",opacity:0,duration:.1}),schoolTearsTl.repeat(Math.floor(20/4.2)-1)},null,2).call(e,["school",25],5).call(()=>{schoolFlagsTl=gsap.timeline(),t.hasTwoSchools?schoolFlagsTl.to(`#${o}-school-flag-top-state1`,{morphSVG:`#${o}-school-flag-top-state2`,duration:.8,ease:"none"}).to(`#${o}-school-flag-top-state1`,{morphSVG:`#${o}-school-flag-top-state3`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-top-state1`,{morphSVG:`#${o}-school-flag-top-state1`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-bottom-state1`,{morphSVG:`#${o}-school-flag-bottom-state2`,duration:.8,ease:"none"},.2).to(`#${o}-school-flag-bottom-state1`,{morphSVG:`#${o}-school-flag-bottom-state3`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-bottom-state1`,{morphSVG:`#${o}-school-flag-bottom-state1`,duration:.8,ease:"none"},">"):schoolFlagsTl.to(`#${o}-school-flag-state1`,{morphSVG:`#${o}-school-flag-state2`,duration:.8,ease:"none"}).to(`#${o}-school-flag-state1`,{morphSVG:`#${o}-school-flag-state3`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-state1`,{morphSVG:`#${o}-school-flag-state1`,duration:.8,ease:"none"},">"),schoolFlagsTl.repeat(-1)},null,5).call(e,["school",50],10).from(u,{drawSVG:0,duration:2},10).call(e,["school",75],15).to(`#${o}-school-door-left`,{x:"-95%",duration:2,ease:"power2.in"},15).to(`#${o}-school-door-right`,{x:"95%",duration:2,ease:"power2.in"},15).call(e,["school",100],20).fromTo(`#${o}-school-clock-mouth`,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},20).fromTo($,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},20);const g={trigger:`.village-${o} .section-distance svg`,start:"top center",end:"bottom 0",onEnterBack:()=>m.restart(),onLeave:()=>m.pause()},m=gsap.timeline({scrollTrigger:g});gsap.set(`#${o}-distance-text`,{opacity:0,scale:.7,transformOrigin:"50% 50%"}),gsap.set(`#${o}-distance-walk`,{drawSVG:"0% 100%"}),gsap.set(`#${o}-distance-arrowhead`,{drawSVG:"50% 50%",opacity:0}),gsap.set(`#${o}-distance-bird1-state2, #${o}-distance-bird2-state2`,{opacity:0}),t.animalsDistance.forEach(t=>{t.selector=document.querySelectorAll(`#${o}-distance-${t.id} path, #${o}-distance-${t.id} line, #${o}-distance-${t.id} polyline`),gsap.set(t.selector,{drawSVG:0})});m.to(`#${o}-distance-walk`,{drawSVG:"100% 100%",duration:3,ease:"none"},2).to(`#${o}-distance-arrowhead`,{drawSVG:"0 100%",opacity:1,duration:.5,ease:"power1.in"}).to(`#${o}-distance-text`,{opacity:1,scale:1,duration:.5,ease:"back.out(1.4)"},">-0.1").call(e,["distance",25],5).to(`#${o}-distance-river-tides`,{opacity:0,duration:.2}).call(n,["distance"],5).call(e,["distance",50],10).call(l,["numberOfBirdsDistance","distance","directionBirdsDistance"],10).call(e,["distance",75],15).call(i,[t.animalsDistance],15).call(e,["distance",100],20).call(()=>{gsap.set(`#${o}-distance-walk`,{opacity:0}),gsap.to(`#${o}-distance-points, #${o}-distance-arrowhead, #${o}-distance-text`,{opacity:.4,duration:1,ease:"power2.out"})},null,20);const p={trigger:`.village-${o} .section-waterMCL svg`,start:"top center",end:"bottom 0",onEnterBack:()=>h.restart(),onLeave:()=>h.pause()},h=gsap.timeline({scrollTrigger:p});document.querySelectorAll(`#${o}-water-contaminants-biological path`).forEach(o=>{const t=o.getAttribute("id");switch(!0){case t.includes("leg-0"):o.classList.add("leg-0");break;case t.includes("leg-3"):o.classList.add("leg-3");break;case t.includes("leg-6"):o.classList.add("leg-6");break;case t.includes("leg-9"):o.classList.add("leg-9")}});for(let e=1;e<=t.waterContaminants.biological;e++)document.querySelector(`#${o}-water-contaminant-biological-${e}`).classList.add(`${o}-water-contaminant-biological`);const w=document.querySelectorAll(`.${o}-water-contaminant-biological circle`),b=document.querySelectorAll(`.${o}-water-contaminant-biological .leg-0`);gsap.set(w,{opacity:0,transformOrigin:"50% 50%"}),gsap.set(b,{drawSVG:"100% 100%"}),gsap.set(".leg-3, .leg-6, .leg-9",{opacity:0});const S=document.querySelectorAll(`#${o}-water-contaminants-inorganic rect`);gsap.set(S,{opacity:0,scale:0,transformOrigin:"50% 50%"});let f="",k="",G="";for(let e=1;e<=t.waterContaminants.biological;e++)switch(!0){case e%3==0:G+=`#${o}-water-contaminant-biological-${e}, `;break;case e%2==0:k+=`#${o}-water-contaminant-biological-${e}, `;break;default:f+=`#${o}-water-contaminant-biological-${e}, `}const V=document.querySelectorAll(f.slice(0,-2)),x=document.querySelectorAll(k.slice(0,-2)),q=document.querySelectorAll(G.slice(0,-2));let v="",T="",A="";for(let e=1;e<=t.waterContaminants.inorganic;e++)switch(!0){case e%3==0:A+=`#${o}-water-contaminant-inorganic-${e}, `;break;case e%2==0:T+=`#${o}-water-contaminant-inorganic-${e}, `;break;default:v+=`#${o}-water-contaminant-inorganic-${e}, `}const E=document.querySelectorAll(v.slice(0,-2)),L=document.querySelectorAll(T.slice(0,-2)),C=document.querySelectorAll(A.slice(0,-2)),B=gsap.timeline(),O=gsap.timeline(),D=gsap.timeline(),M=document.querySelector(`#${o}-water-drop-small-1`),F=document.querySelector(`#${o}-water-drop-small-2`),H=document.querySelector(`#${o}-water-drop-small-3`);h.to(S,{opacity:1,scale:1,duration:.2,ease:"back.out(1.7)",stagger:{each:.1,from:"random"}},1).fromTo(w,{scale:0},{scale:1,opacity:1,stagger:{each:.05,from:"random"},duration:.2,ease:"back.out(1.4)"},2).to(b,{drawSVG:"0 100%",stagger:{each:.03,from:"random"},duration:.5,ease:"sine.in"}).call(e,["waterMCL",25],5).call(()=>{[E,L,C].forEach((o,t)=>{B.to(o,{x:"-=0.5",y:"+=1",duration:.7,ease:ease="linear"},.25*t).to(o,{x:"-=0.5",y:"-=1",duration:.7,ease:ease="linear"},">").to(o,{x:"+=1",y:"+=1",duration:.7,ease:ease="linear"},">").to(o,{x:"+=1",y:"-=1",duration:.7,ease:ease="linear"},">"),B.repeat(-1).yoyo(!0)})},null,5).call(e,["waterMCL",50],10).call(()=>{const e=[1,2,3,4,5,6,7,8];for(let a=1;a<=t.waterContaminants.biological;a++)e.forEach(t=>{D.to(`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-3`,duration:.5,ease:"none"},0).to(`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-6`,duration:.5,ease:"none"},">").to(`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-9`,duration:.5,ease:"none"},">").to(`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${o}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-3`,duration:.5,ease:"none"},">"),D.repeat(-1).yoyo(!0)})},null,10).call(()=>{[V,x,q].forEach((o,t)=>{O.to(o,{x:"-=0.7",y:"+=1.3",duration:.8,ease:ease="linear"},.25*t).to(o,{x:"-=0.7",y:"-=1.3",duration:.8,ease:ease="linear"},">").to(o,{x:"+=1.4",y:"+=1.3",duration:.8,ease:ease="linear"},">").to(o,{x:"+=1.4",y:"-=1.3",duration:.8,ease:ease="linear"},">"),O.repeat(-1).yoyo(!0)})},null,10).call(e,["waterMCL",75],15).call(()=>{[M,F,H].forEach((o,t)=>{const e=gsap.timeline();e.to(o,{x:"-=0.5",y:"+=1",duration:.7,ease:ease="linear"},.25*t).to(o,{x:"-=0.5",y:"-=1",duration:.7,ease:ease="linear"},">").to(o,{x:"+=1",y:"+=1",duration:.7,ease:ease="linear"},">").to(o,{x:"+=1",y:"-=1",duration:.7,ease:ease="linear"},">"),e.repeat(-1).yoyo(!0)})},null,15);const W={trigger:`.village-${o} .section-solution svg`,start:"top center",end:"bottom 0",onEnterBack:()=>I.restart(),onLeave:()=>I.pause()},I=gsap.timeline({scrollTrigger:W}),j=document.querySelectorAll(`#${o}-solution-water-treatment path, #${o}-solution-water-treatment line, #${o}-solution-water-treatment polyline, #${o}-solution-water-treatment circle`);gsap.set(j,{drawSVG:0}),gsap.set(`#${o}-solution-water-treatment-faded`,{opacity:.3}),document.querySelector(`#${o}-solution-bird1-state2`)&&gsap.set(`#${o}-solution-bird1-state2`,{opacity:0}),document.querySelector(`#${o}-solution-bird2-state2`)&&gsap.set(`#${o}-solution-bird2-state2`,{opacity:0}),document.querySelector(`#${o}-solution-bird3-state2`)&&gsap.set(`#${o}-solution-bird3-state2`,{opacity:0}),t.animalsSolution.forEach(t=>{t.selector=document.querySelectorAll(`#${o}-solution-${t.id} path, #${o}-solution-${t.id} line, #${o}-solution-${t.id} polyline`),gsap.set(t.selector,{drawSVG:0})});const z=()=>{gsap.timeline().call(l,["numberOfBirdsSolution","solution","directionBirdsSolution"])};I.call(e,["solution",25],5).to(`#${o}-solution-river-tides`,{opacity:0,duration:.2}).call(n,["solution"],5).call(e,["solution",50],10).call(i,[t.animalsSolution],10).call(e,["solution",75],15).call(e,["solution",100],20).to(j,{drawSVG:"100%",duration:2},20).to(`#${o}-solution-water-treatment-faded`,{opacity:0,duration:.2},">"),t.numberOfBirdsSolution>0&&I.add(z,15);const J={trigger:`.village-${o} .section-coloring svg`,start:"top center",end:"bottom 0",onEnterBack:()=>K.restart(),onLeave:()=>K.pause()},K=gsap.timeline({scrollTrigger:J}),N=document.querySelectorAll(`#${o}-coloring-kids path, #${o}-coloring-kids ellipse, #${o}-coloring-kids line, #${o}-coloring-kids circle`),P=document.querySelectorAll(`#${o}-coloring-smile-1, #${o}-coloring-smile-2, #${o}-coloring-smile-3`),Q=document.querySelectorAll(`#${o}-coloring-erlenmeyers path, #${o}-coloring-erlenmeyers line`),R=document.querySelectorAll(`#${o}-coloring-drops path`),U=document.querySelectorAll(`#${o}-coloring-pencil-1, #${o}-coloring-pencil-2, #${o}-coloring-pencil-3, #${o}-coloring-pencil-4, #${o}-coloring-pencil-5`);gsap.set(P,{opacity:0}),gsap.set(R,{opacity:0,transformOrigin:"50% 50%"}),gsap.set(U,{x:"-=10",y:"+=10",opacity:0}),gsap.set(`#${o}-coloring-windwheel`,{transformOrigin:"50% 50%"});K.from(N,{drawSVG:0,duration:3},2).call(e,["coloring",25],5).from(Q,{drawSVG:0,duration:2},5).fromTo(R,{scale:0},{scale:1,opacity:1,stagger:{each:.15,from:"random"},duration:.3,ease:"back.out(1.4)"},6.8).call(e,["coloring",50],10).to(U,{x:"+=10",y:"-=10",opacity:1,stagger:{each:.2,from:"end"},duration:.3,ease:"back.out(1.4)"},10).call(e,["coloring",75],15).call(()=>{const t=gsap.timeline();t.to(`#${o}-coloring-windwheel`,{rotation:360,duration:1.5,ease:"none"}),t.repeat(-1)},null,15).call(e,["coloring",100],20).fromTo(P,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},20)};