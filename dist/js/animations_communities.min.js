/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
const start25=5,start50=10,start75=15,start100=20,getTransition=()=>d3.transition().duration(200),illustrations=["community","school","distance","waterMCL","solution","coloring"],triggerAnimations=(o,t)=>{const a=illustrationsInfo.find(t=>t.community===o),e=(o,t,a)=>{const e="left"===a?"-":"+";gsap.timeline().to(o,{morphSVG:t,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},0).to(o,{morphSVG:o,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:t,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:o,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:t,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:o,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:t,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(o,{morphSVG:o,x:`${e}=10`,y:y="-=15",duration:.4,ease:"none"},">")},n=(t,a,e,n,s)=>{gsap.set(`#${o}-${t}-wheel-back, #${o}-${t}-wheel-front`,{transformOrigin:"50% 50%"},0);const i="back.in(1.7)",c="+"===e?"-":"+";gsap.to(`#${o}-community-tractor-color`,{opacity:1,duration:3,ease:"sine.out"});const l=gsap.timeline();l.to(`#${o}-${t}-wheel-back`,{rotation:`${e}=${n}`,duration:2,ease:i},3.1).to(`#${o}-${t}-wheel-front`,{rotation:`${e}=${s}`,duration:2,ease:i},3.1).to(`#${o}-${t}-tractor, #${o}-community-tractor-color`,{x:`${e}${a}`,duration:3.1,ease:i},3.1).to(`#${o}-${t}-wheel-back`,{rotation:`${c}=${n}`,duration:1,ease:"back.out(1.4)"},7).to(`#${o}-${t}-wheel-front`,{rotation:`${c}=${s}`,duration:1,ease:"back.out(1.4)"},7).to(`#${o}-${t}-tractor, #${o}-community-tractor-color`,{x:0,duration:1,ease:"back.out(1.4)"},7),l.repeat(-1).repeatDelay(7).yoyo(!0)},s=t=>{t.forEach(t=>{gsap.timeline().to(t.selector,{drawSVG:"100%",duration:2}).to(`#${o}-community-${t.id}-color`,{opacity:1,duration:3,ease:"sine.out"},">-0.5")})};if(t>=25){const i={trigger:`.village-${o} .section-community svg`,start:"top center",end:"bottom 0",onEnterBack:()=>c.restart(),onLeave:()=>c.pause()},c=gsap.timeline({scrollTrigger:i});t>=75&&a.animalsCommunity.forEach(t=>{t.selector=document.querySelectorAll(`#${o}-community-${t.id} path, #${o}-community-${t.id} line, #${o}-community-${t.id} polyline`),gsap.set(t.selector,{drawSVG:0})});const l=`${a.cloudsCommunity.direction}=${a.cloudsCommunity.distance}`;"totoral-bajo"===o?gsap.set(`#${o}-community-clouds-back-outline`,{x:l,opacity:0}):"las-mercedes"===o?gsap.set(`#${o}-community-clouds-front-outline, #${o}-community-clouds-back-outline`,{x:l,opacity:0}):"carrizalillo"===o&&gsap.set(`#${o}-community-clouds-outline`,{x:l,opacity:0}),gsap.set(`#${o}-community-clouds-front`,{opacity:0}),gsap.set(`#${o}-community-clouds-front, #${o}-community-clouds-back`,{x:l});const r=()=>{const t=gsap.timeline();"totoral-bajo"===o?t.to(`#${o}-community-clouds-front, #${o}-community-clouds-front-color, #${o}-community-sun-color`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${o}-community-clouds-front`,{x:-1*l,duration:20,ease:"sine.out"},"<-1").to(`#${o}-community-clouds-back, #${o}-community-clouds-back-outline`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${o}-community-clouds-back, #${o}-community-clouds-back-outline`,{x:-1*l,duration:20,ease:"sine.out"},"<-1"):"las-mercedes"===o?t.to(`#${o}-community-clouds-front, #${o}-community-clouds-front-outline, #${o}-community-sun-color`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${o}-community-clouds-front, #${o}-community-clouds-front-outline`,{x:-1*l,duration:20,ease:"sine.out"},"<-1").to(`#${o}-community-clouds-back, #${o}-community-clouds-back-outline`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${o}-community-clouds-back, #${o}-community-clouds-back-outline`,{x:-1*l,duration:20,ease:"sine.out"},"<-1"):"carrizalillo"===o?t.to(`#${o}-community-clouds-front, #${o}-community-clouds-outline, #${o}-community-sun-color`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${o}-community-clouds-front, #${o}-community-clouds-outline`,{x:-1*l,duration:20,ease:"sine.out"},"<-1").to(`#${o}-community-clouds-back`,{opacity:1,duration:3,ease:"sine.out"},2.5).to(`#${o}-community-clouds-back`,{x:-1*l,duration:22,ease:"sine.out"},"<-1"):t.to(`#${o}-community-clouds-front, #${o}-community-clouds-front-color, #${o}-community-sun-color`,{opacity:1,duration:3,ease:"sine.out"},0).to(`#${o}-community-clouds-front`,{x:-1*l,duration:20,ease:"sine.out"},"<-1").to(`#${o}-community-clouds-back`,{opacity:1,duration:3,ease:"sine.out"},2.5).to(`#${o}-community-clouds-back`,{x:-1*l,duration:22,ease:"sine.out"},"<-1")},u=()=>{gsap.timeline().call(n,["community",a.vehicleCommunity.distance,a.vehicleCommunity.direction,a.vehicleCommunity.rotationWheelBack,a.vehicleCommunity.rotationWheelFront])},m=()=>{gsap.timeline().call(s,[a.animalsCommunity])},d=()=>{const t=gsap.timeline();let n="";a.villageColorsCommunity.forEach((t,e)=>{const s=e===a.villageColorsCommunity.length-1?"":", ";n=n.concat(`#${o}-community-${t}-color${s}`)}),"totoral-alto"===o?t.call(e,[`#${o}-community-bird1-state1`,`#${o}-community-bird1-state2`,"right"]).call(e,[`#${o}-community-bird3-state1`,`#${o}-community-bird3-state2`,"left"],">+1").call(e,[`#${o}-community-bird2-state1`,`#${o}-community-bird2-state2`,"left"],">+1").to(n,{opacity:1,duration:3,ease:"sine.out",stagger:{each:.2,from:"random"}},">-1"):"totoral-bajo"==o?t.call(e,[`#${o}-community-bird1-state1`,`#${o}-community-bird1-state2`,"left"]).call(e,[`#${o}-community-bird3-state1`,`#${o}-community-bird3-state2`,"left"],">+1").call(e,[`#${o}-community-bird2-state1`,`#${o}-community-bird2-state2`,"left"],">+1").to(n,{opacity:1,duration:3,ease:"sine.out",stagger:{each:.2,from:"random"}},">-1"):t.call(e,[`#${o}-community-bird2-state1`,`#${o}-community-bird2-state2`,"left"]).call(e,[`#${o}-community-bird1-state1`,`#${o}-community-bird1-state2`,"left"],1).to(n,{opacity:1,duration:3,ease:"sine.out",stagger:{each:.2,from:"random"}},">-1")};c.call(r,null,1),t>=50&&c.add(u,4),t>=75&&c.add(m,8),100===t&&c.add(d,12)}const i={trigger:`.village-${o} .section-school svg`,start:"top center",end:"bottom 0",onEnterBack:()=>c.restart(),onLeave:()=>c.pause()},c=gsap.timeline({scrollTrigger:i}),l=a.missedSchoolHours.max/3;gsap.set(`#${o}-school-clock-small-hand`,{transformOrigin:"bottom center"},0),gsap.set(`#${o}-school-clock-big-hand`,{transformOrigin:"bottom center"},0),gsap.set(`#${o}-school-clock-mouth`,{opacity:0}),t<25&&(gsap.set(`#${o}-school-clock-small-hand`,{rotation:210}),gsap.set(`#${o}-school-clock-big-hand`,{rotation:135}));let r=document.querySelectorAll(`#${o}-school-kids polygon, #${o}-school-kids polyline, #${o}-school-kids path, #${o}-school-kids ellipse`),u=document.querySelectorAll(`#${o}-school-kid1-mouth, #${o}-school-kid2-mouth`);gsap.set(u,{opacity:0}),t>=50&&gsap.set(r,{drawSVG:0}),a.hasTwoSchools?gsap.set(`#${o}-school-flag-top-state2, #${o}-school-flag-top-state3, #${o}-school-flag-bottom-state2, #${o}-school-flag-bottom-state3`,{opacity:0},0):gsap.set(`#${o}-school-flag-state2, #${o}-school-flag-state3`,{opacity:0},0);const m=()=>{const a=document.querySelector(`#${o}-school-clock-tear-left`),e=document.querySelector(`#${o}-school-clock-tear-right`);schoolTearsTl=gsap.timeline(),schoolTearsTl.from(a,{drawSVG:0,duration:.7,ease:"none"},0).to(a,{y:25,duration:1,ease:"power2.in"}).to(a,{drawSVG:"100% 100%",opacity:0,duration:.1}).from(e,{drawSVG:0,duration:.7,ease:"none"},3.2).to(e,{y:25,duration:1,ease:"power2.in"}).to(e,{drawSVG:"100% 100%",opacity:0,duration:.1});t<100||Math.floor(9/4.2);schoolTearsTl.repeat(-1)},d=()=>{schoolFlagsTl=gsap.timeline(),a.hasTwoSchools?schoolFlagsTl.to(`#${o}-school-flag-top-state1`,{morphSVG:`#${o}-school-flag-top-state2`,duration:.8,ease:"none"}).to(`#${o}-school-flag-top-state1`,{morphSVG:`#${o}-school-flag-top-state3`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-top-state1`,{morphSVG:`#${o}-school-flag-top-state1`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-bottom-state1`,{morphSVG:`#${o}-school-flag-bottom-state2`,duration:.8,ease:"none"},.2).to(`#${o}-school-flag-bottom-state1`,{morphSVG:`#${o}-school-flag-bottom-state3`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-bottom-state1`,{morphSVG:`#${o}-school-flag-bottom-state1`,duration:.8,ease:"none"},">"):schoolFlagsTl.to(`#${o}-school-flag-state1`,{morphSVG:`#${o}-school-flag-state2`,duration:.8,ease:"none"}).to(`#${o}-school-flag-state1`,{morphSVG:`#${o}-school-flag-state3`,duration:.8,ease:"none"},">").to(`#${o}-school-flag-state1`,{morphSVG:`#${o}-school-flag-state1`,duration:.8,ease:"none"},">"),schoolFlagsTl.repeat(-1)},$=()=>{gsap.timeline().to(`#${o}-school-clock-small-hand`,{rotation:360*a.missedSchoolHours.max/12,duration:l,ease:"none"},0).to(`#${o}-school-clock-big-hand`,{rotation:360*a.missedSchoolHours.max,duration:l,ease:"none"},0).call(m,null,0)},h=()=>{gsap.timeline().to(`#${o}-school-door-left`,{x:"-95%",duration:2,ease:"power2.in"},0).to(`#${o}-school-door-right`,{x:"95%",duration:2,ease:"power2.in"},0)},p=()=>{gsap.timeline().to(r,{drawSVG:"100%",duration:2}).fromTo(`#${o}-school-clock-mouth`,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},">-0.8").fromTo(u,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},">-0.8")};t>=25&&c.add($,2),t>=50&&c.add(d,0),t>=75&&c.add(h,6),100===t&&c.add(p,9)};