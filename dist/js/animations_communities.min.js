/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
const start25=5,start50=10,start75=15,start100=20,getTransition=()=>d3.transition().duration(200),illustrations=["community","school","distance","waterMCL","solution","coloring"],triggerAnimations=(e,t)=>{const o=illustrationsInfo.find(t=>t.community===e),a=(e,t,o)=>{const a="left"===o?"-":"+";gsap.timeline().to(e,{morphSVG:t,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},0).to(e,{morphSVG:e,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(e,{morphSVG:t,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(e,{morphSVG:e,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(e,{morphSVG:t,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">").to(e,{morphSVG:e,x:`${a}=10`,y:y="-=15",duration:.4,ease:"none"},">")},i=(t,i,n)=>{const s=o[t],r=o[n],l=gsap.timeline();switch(s){case 2:l.call(a,[`#${e}-${i}-bird1-state1`,`#${e}-${i}-bird1-state2`,r]).call(a,[`#${e}-${i}-bird2-state1`,`#${e}-${i}-bird2-state2`,r],">+1");break;case 4:l.call(a,[`#${e}-${i}-bird1-state1`,`#${e}-${i}-bird1-state2`,r]).call(a,[`#${e}-${i}-bird2-state1`,`#${e}-${i}-bird2-state2`,r],">+1").call(a,[`#${e}-${i}-bird3-state1`,`#${e}-${i}-bird3-state2`,r],">+1").call(a,[`#${e}-${i}-bird4-state1`,`#${e}-${i}-bird4-state2`,r],">+1")}},n=(t,o,a,i,n)=>{gsap.set(`#${e}-${t}-wheel-back, #${e}-${t}-wheel-front`,{transformOrigin:"50% 50%"},0);const s="back.in(1.7)",r="+"===a?"-":"+",l=gsap.timeline();l.to(`#${e}-${t}-wheel-back`,{rotation:`${a}=${i}`,duration:2,ease:s},0).to(`#${e}-${t}-wheel-front`,{rotation:`${a}=${n}`,duration:2,ease:s},0).to(`#${e}-${t}-tractor`,{x:`${a}${o}`,duration:2,ease:s},0).to(`#${e}-${t}-wheel-back`,{rotation:`${r}=${i}`,duration:1,ease:"back.out(1.4)"},7).to(`#${e}-${t}-wheel-front`,{rotation:`${r}=${n}`,duration:1,ease:"back.out(1.4)"},7).to(`#${e}-${t}-tractor`,{x:0,duration:1,ease:"back.out(1.4)"},7),l.repeat(-1).repeatDelay(7).yoyo(!0)},s=t=>{const o=gsap.timeline();o.to(`#${e}-${t}-river-tides`,{x:"+=30",opacity:1,duration:4,ease:"none"}).to(`#${e}-${t}-river-tides`,{x:"+=30",opacity:0,duration:4,ease:"none"}),o.repeat(-1).repeatDelay(2)},r=e=>{e.forEach(e=>{gsap.to(e.selector,{drawSVG:"100%",duration:2})})};if(t>=25){const i={trigger:`.village-${e} .section-community svg`,start:"top center",end:"bottom 0",onEnterBack:()=>s.restart(),onLeave:()=>s.pause()},s=gsap.timeline({scrollTrigger:i});t>=75&&o.animalsCommunity.forEach(t=>{t.selector=document.querySelectorAll(`#${e}-community-${t.id} path, #${e}-community-${t.id} line, #${e}-community-${t.id} polyline`),gsap.set(t.selector,{drawSVG:0})});const l=()=>{gsap.to(`#cloud-color-1, #${e}-community-clouds-back`,{opacity:.42,duration:1,ease:"power1.out"}),gsap.to(`#${e}-community-sun-color`,{opacity:.8,duration:1,ease:"power1.out"}),gsap.timeline().fromTo(`#${e}-community-clouds-front`,{x:220},{x:-300,duration:50,repeat:-1,ease:"none"},0).fromTo(`#${e}-community-clouds-back`,{x:220},{x:-300,duration:80,repeat:-1,ease:"none"},0)},c=()=>{gsap.timeline().call(n,["community",o.vehicleCommunity.distance,o.vehicleCommunity.direction,o.vehicleCommunity.rotationWheelBack,o.vehicleCommunity.rotationWheelFront])},d=()=>{gsap.timeline().call(r,[o.animalsCommunity])},g=()=>{gsap.timeline().call(a,[`#${e}-community-bird2-state1`,`#${e}-community-bird2-state2`,"left"]).call(a,[`#${e}-community-bird1-state1`,`#${e}-community-bird1-state2`,"left"],1)};s.call(l,null,0),t>=50&&s.add(c,3),t>=75&&s.add(d,7),(t=100)&&s.add(g,12)}const l={trigger:`.village-${e} .section-school svg`,start:"top center",end:"bottom 0",onEnterBack:()=>c.restart(),onLeave:()=>c.pause()},c=gsap.timeline({scrollTrigger:l}),d=o.missedSchoolHours.max/3;let g,u;gsap.set(`#${e}-school-clock-small-hand`,{transformOrigin:"bottom center"},0),gsap.set(`#${e}-school-clock-big-hand`,{transformOrigin:"bottom center"},0),gsap.set(`#${e}-school-clock-mouth`,{opacity:0}),t>=50&&(g=document.querySelectorAll(`#${e}-school-kids polygon, #${e}-school-kids polyline, #${e}-school-kids path, #${e}-school-kids ellipse`),u=document.querySelectorAll(`#${e}-school-kid1-mouth, #${e}-school-kid2-mouth`),gsap.set(u,{opacity:0}),gsap.set(g,{drawSVG:0})),o.hasTwoSchools?gsap.set(`#${e}-school-flag-top-state2, #${e}-school-flag-top-state3, #${e}-school-flag-bottom-state2, #${e}-school-flag-bottom-state3`,{opacity:0},0):gsap.set(`#${e}-school-flag-state2, #${e}-school-flag-state3`,{opacity:0},0);const m=()=>{schoolFlagsTl=gsap.timeline(),o.hasTwoSchools?schoolFlagsTl.to(`#${e}-school-flag-top-state1`,{morphSVG:`#${e}-school-flag-top-state2`,duration:.8,ease:"none"}).to(`#${e}-school-flag-top-state1`,{morphSVG:`#${e}-school-flag-top-state3`,duration:.8,ease:"none"},">").to(`#${e}-school-flag-top-state1`,{morphSVG:`#${e}-school-flag-top-state1`,duration:.8,ease:"none"},">").to(`#${e}-school-flag-bottom-state1`,{morphSVG:`#${e}-school-flag-bottom-state2`,duration:.8,ease:"none"},.2).to(`#${e}-school-flag-bottom-state1`,{morphSVG:`#${e}-school-flag-bottom-state3`,duration:.8,ease:"none"},">").to(`#${e}-school-flag-bottom-state1`,{morphSVG:`#${e}-school-flag-bottom-state1`,duration:.8,ease:"none"},">"):schoolFlagsTl.to(`#${e}-school-flag-state1`,{morphSVG:`#${e}-school-flag-state2`,duration:.8,ease:"none"}).to(`#${e}-school-flag-state1`,{morphSVG:`#${e}-school-flag-state3`,duration:.8,ease:"none"},">").to(`#${e}-school-flag-state1`,{morphSVG:`#${e}-school-flag-state1`,duration:.8,ease:"none"},">"),schoolFlagsTl.repeat(-1)},$=()=>{gsap.timeline().to(g,{drawSVG:"100%",duration:2})},p=()=>{gsap.timeline().to(`#${e}-school-door-left`,{x:"-95%",duration:2,ease:"power2.in"},0).to(`#${e}-school-door-right`,{x:"95%",duration:2,ease:"power2.in"},0)},h=()=>{gsap.timeline().fromTo(`#${e}-school-clock-mouth`,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},0).fromTo(u,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},0)};if(c.to(`#${e}-school-clock-small-hand`,{rotation:360*o.missedSchoolHours.max/12,duration:d,ease:"none"},2).to(`#${e}-school-clock-big-hand`,{rotation:360*o.missedSchoolHours.max,duration:d,ease:"none"},2).call(()=>{const t=document.querySelector(`#${e}-school-clock-tear-left`),o=document.querySelector(`#${e}-school-clock-tear-right`);schoolTearsTl=gsap.timeline(),schoolTearsTl.from(t,{drawSVG:0,duration:.7,ease:"none"},0).to(t,{y:25,duration:1,ease:"power2.in"}).to(t,{drawSVG:"100% 100%",opacity:0,duration:.1}).from(o,{drawSVG:0,duration:.7,ease:"none"},3.2).to(o,{y:25,duration:1,ease:"power2.in"}).to(o,{drawSVG:"100% 100%",opacity:0,duration:.1}),schoolTearsTl.repeat(Math.floor(20/4.2)-1)},null,2),t>=25&&c.add(m,0),t>=50&&c.add($,8),t>=75&&c.add(p,12),(t=100)&&c.add(h,15),t>=25){const a={trigger:`.village-${e} .section-distance svg`,start:"top center",end:"bottom 0",onEnterBack:()=>n.restart(),onLeave:()=>n.pause()},n=gsap.timeline({scrollTrigger:a});gsap.set(`#${e}-distance-text`,{opacity:0,scale:.7,transformOrigin:"50% 50%"}),gsap.set(`#${e}-distance-walk`,{drawSVG:"0% 100%"}),gsap.set(`#${e}-distance-arrowhead`,{drawSVG:"50% 50%",opacity:0}),gsap.set(`#${e}-distance-bird1-state2, #${e}-distance-bird2-state2`,{opacity:0}),t>=50&&(gsap.set(`#${e}-distance-river-tides`,{opacity:0}),gsap.set(`#${e}-distance-river-tides`,{x:"-=20"})),(t=100)&&o.animalsDistance.forEach(t=>{t.selector=document.querySelectorAll(`#${e}-distance-${t.id} path, #${e}-distance-${t.id} line, #${e}-distance-${t.id} polyline`),gsap.set(t.selector,{drawSVG:0})});const l=()=>{gsap.timeline().call(s,["distance"])},c=()=>{gsap.timeline().call(i,["numberOfBirdsDistance","distance","directionBirdsDistance"])},d=()=>{gsap.timeline().call(r,[o.animalsDistance])};n.to(`#${e}-distance-walk`,{drawSVG:"100% 100%",duration:3,ease:"none"},2).to(`#${e}-distance-arrowhead`,{drawSVG:"0 100%",opacity:1,duration:.5,ease:"power1.in"}).to(`#${e}-distance-text`,{opacity:1,scale:1,duration:.5,ease:"back.out(1.4)"},">-0.1"),t>=50&&n.add(l,0),t>=75&&n.add(c,6),(t=100)&&n.add(d,9)}if(document.querySelectorAll(`#${e}-water-contaminants-biological path`).forEach(e=>{const t=e.getAttribute("id");switch(!0){case t.includes("leg-0"):e.classList.add("leg-0");break;case t.includes("leg-3"):e.classList.add("leg-3");break;case t.includes("leg-6"):e.classList.add("leg-6");break;case t.includes("leg-9"):e.classList.add("leg-9")}}),gsap.set(".leg-3, .leg-6, .leg-9",{opacity:0}),t>=25){const a={trigger:`.village-${e} .section-waterMCL svg`,start:"top center",end:"bottom 0",onEnterBack:()=>i.restart(),onLeave:()=>i.pause()},i=gsap.timeline({scrollTrigger:a});for(let t=1;t<=o.waterContaminants.biological;t++)document.querySelector(`#${e}-water-contaminant-biological-${t}`).classList.add(`${e}-water-contaminant-biological`);const n=document.querySelectorAll(`.${e}-water-contaminant-biological circle`),s=document.querySelectorAll(`.${e}-water-contaminant-biological .leg-0`);gsap.set(n,{opacity:0,transformOrigin:"50% 50%"}),gsap.set(s,{drawSVG:"100% 100%"});const r=document.querySelectorAll(`#${e}-water-contaminants-inorganic rect`);gsap.set(r,{opacity:0,scale:0,transformOrigin:"50% 50%"});let l,c,d,g="",u="",m="";if(t>=50){for(let t=1;t<=o.waterContaminants.biological;t++)switch(!0){case t%3==0:m+=`#${e}-water-contaminant-biological-${t}, `;break;case t%2==0:u+=`#${e}-water-contaminant-biological-${t}, `;break;default:g+=`#${e}-water-contaminant-biological-${t}, `}l=document.querySelectorAll(g.slice(0,-2)),c=document.querySelectorAll(u.slice(0,-2)),d=document.querySelectorAll(m.slice(0,-2))}let $,p,y,h="",w="",b="";if(t>=25){for(let t=1;t<=o.waterContaminants.inorganic;t++)switch(!0){case t%3==0:b+=`#${e}-water-contaminant-inorganic-${t}, `;break;case t%2==0:w+=`#${e}-water-contaminant-inorganic-${t}, `;break;default:h+=`#${e}-water-contaminant-inorganic-${t}, `}$=document.querySelectorAll(h.slice(0,-2)),p=document.querySelectorAll(w.slice(0,-2)),y=document.querySelectorAll(b.slice(0,-2))}const f=gsap.timeline(),S=()=>{[$,p,y].forEach((e,t)=>{f.to(e,{x:"-=0.5",y:"+=1",duration:.7,ease:ease="linear"},.25*t).to(e,{x:"-=0.5",y:"-=1",duration:.7,ease:ease="linear"},">").to(e,{x:"+=1",y:"+=1",duration:.7,ease:ease="linear"},">").to(e,{x:"+=1",y:"-=1",duration:.7,ease:ease="linear"},">"),f.repeat(-1).yoyo(!0)})},k=gsap.timeline(),G=()=>{[l,c,d].forEach((e,t)=>{k.to(e,{x:"-=0.7",y:"+=1.3",duration:.8,ease:ease="linear"},.25*t).to(e,{x:"-=0.7",y:"-=1.3",duration:.8,ease:ease="linear"},">").to(e,{x:"+=1.4",y:"+=1.3",duration:.8,ease:ease="linear"},">").to(e,{x:"+=1.4",y:"-=1.3",duration:.8,ease:ease="linear"},">"),k.repeat(-1).yoyo(!0)})},V=gsap.timeline(),x=()=>{const t=[1,2,3,4,5,6,7,8];for(let a=1;a<=o.waterContaminants.biological;a++)t.forEach(t=>{V.to(`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-3`,duration:.5,ease:"none"},0).to(`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-6`,duration:.5,ease:"none"},">").to(`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-9`,duration:.5,ease:"none"},">").to(`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-0`,{morphSVG:`#${e}-water-contaminant-biological-${a} #leg-group-${a}-${t} .leg-3`,duration:.5,ease:"none"},">"),V.repeat(-1).yoyo(!0)})},q=document.querySelector(`#${e}-water-drop-small-1`),v=document.querySelector(`#${e}-water-drop-small-2`),T=document.querySelector(`#${e}-water-drop-small-3`),A=()=>{[q,v,T].forEach((e,t)=>{const o=gsap.timeline();o.to(e,{x:"-=0.5",y:"+=1",duration:.7,ease:ease="linear"},.25*t).to(e,{x:"-=0.5",y:"-=1",duration:.7,ease:ease="linear"},">").to(e,{x:"+=1",y:"+=1",duration:.7,ease:ease="linear"},">").to(e,{x:"+=1",y:"-=1",duration:.7,ease:ease="linear"},">"),o.repeat(-1).yoyo(!0)})},E=()=>{gsap.timeline().call(x,null,0).call(G,null,0)};i.to(r,{opacity:1,scale:1,duration:.2,ease:"back.out(1.7)",stagger:{each:.1,from:"random"}},1).fromTo(n,{scale:0},{scale:1,opacity:1,stagger:{each:.05,from:"random"},duration:.2,ease:"back.out(1.4)"},2).to(s,{drawSVG:"0 100%",stagger:{each:.03,from:"random"},duration:.5,ease:"sine.in"}),t>=50&&i.add(S,5),t>=75&&i.add(E,7),(t=100)&&i.add(A,10)}const w=document.querySelectorAll(`#${e}-solution-water-treatment path, #${e}-solution-water-treatment line, #${e}-solution-water-treatment polyline, #${e}-solution-water-treatment circle`);if(gsap.set(w,{drawSVG:0}),gsap.set(`#${e}-solution-water-treatment-faded`,{opacity:.3}),document.querySelector(`#${e}-solution-bird1-state2`)&&gsap.set(`#${e}-solution-bird1-state2`,{opacity:0}),document.querySelector(`#${e}-solution-bird2-state2`)&&gsap.set(`#${e}-solution-bird2-state2`,{opacity:0}),document.querySelector(`#${e}-solution-bird3-state2`)&&gsap.set(`#${e}-solution-bird3-state2`,{opacity:0}),t>=25){const a={trigger:`.village-${e} .section-solution svg`,start:"top center",end:"bottom 0",onEnterBack:()=>n.restart(),onLeave:()=>n.pause()},n=gsap.timeline({scrollTrigger:a});gsap.set(`#${e}-solution-river-tides`,{opacity:0}),gsap.set(`#${e}-solution-river-tides`,{x:"-=20"}),o.animalsSolution.forEach(t=>{t.selector=document.querySelectorAll(`#${e}-solution-${t.id} path, #${e}-solution-${t.id} line, #${e}-solution-${t.id} polyline`),gsap.set(t.selector,{drawSVG:0})});const l=()=>{gsap.timeline().call(i,["numberOfBirdsSolution","solution","directionBirdsSolution"])},c=()=>{gsap.timeline().call(r,[o.animalsSolution])},d=()=>{gsap.timeline().to(w,{drawSVG:"100%",duration:2}).to(`#${e}-solution-water-treatment-faded`,{opacity:0,duration:.2})};n.call(s,["solution"]),t>=50&&n.add(c,4),t>=75&&o.numberOfBirdsSolution>0&&n.add(l,8),(t=100)&&n.add(d,12)}if(t>=25){const o={trigger:`.village-${e} .section-coloring svg`,start:"top center",end:"bottom 0",onEnterBack:()=>a.restart(),onLeave:()=>a.pause()},a=gsap.timeline({scrollTrigger:o}),i=document.querySelectorAll(`#${e}-coloring-kids path, #${e}-coloring-kids ellipse, #${e}-coloring-kids line, #${e}-coloring-kids circle`),n=document.querySelectorAll(`#${e}-coloring-smile-1, #${e}-coloring-smile-2, #${e}-coloring-smile-3`),s=document.querySelectorAll(`#${e}-coloring-erlenmeyers path, #${e}-coloring-erlenmeyers line`),r=document.querySelectorAll(`#${e}-coloring-drops path`),l=document.querySelectorAll(`#${e}-coloring-pencil-1, #${e}-coloring-pencil-2, #${e}-coloring-pencil-3, #${e}-coloring-pencil-4, #${e}-coloring-pencil-5`);gsap.set(r,{opacity:0,transformOrigin:"50% 50%"}),t>=50&&gsap.set(l,{x:"-=10",y:"+=10",opacity:0}),t>=75&&gsap.set(`#${e}-coloring-windwheel`,{transformOrigin:"50% 50%"}),(t=100)&&(gsap.set(i,{drawSVG:0}),gsap.set(n,{opacity:0}));const c=()=>{const t=gsap.timeline();t.to(`#${e}-coloring-windwheel`,{rotation:360,duration:1.5,ease:"none"}),t.repeat(-1)},d=()=>{gsap.timeline().to(l,{x:"+=10",y:"-=10",opacity:1,stagger:{each:.2,from:"end"},duration:.3,ease:"back.out(1.4)"})},g=()=>{gsap.timeline().to(i,{drawSVG:"100%",duration:3}).fromTo(n,{drawSVG:"50% 50%"},{drawSVG:"0 100%",opacity:1,duration:1,ease:"sine.in"},">-0.8")};a.from(s,{drawSVG:0,duration:2},2).fromTo(r,{scale:0},{scale:1,opacity:1,stagger:{each:.15,from:"random"},duration:.3,ease:"back.out(1.4)"},"<+=1.8"),t>=50&&a.add(d,3),t>=75&&a.add(c,4),t>=75&&a.add(g,5)}};